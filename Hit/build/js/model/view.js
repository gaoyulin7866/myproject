function portal_edit(e){Obligate_4_Array=[];for(var t=[],a="",o="",i=new Object,l=1;l<=10;l++)'<option value="'+l+'">'+l+"个</option>";$.ajax({type:"get",url:TempUrl+"hit/getPortal.action?id="+e,contentType:"application/x-www-form-urlencoded",dataType:"json",success:function(l){t=[(i=l).por_col1,i.por_col2,i.por_col3,i.por_col4,i.por_col5,i.por_col6,i.por_col7,i.por_col8,i.por_col9,i.por_col10];for(var r=1;r<=i.por_colnum;r++)Obligate_4_Array.push(r);$.ajax({type:"get",url:TempUrl+"hit/getVersions.action?type=2&app_or_por=2",contentType:"application/x-www-form-urlencoded",dataType:"json",success:function(t){$.each(t,function(e,t){a+='<option value="'+t.id+'">'+t.v_name+"</option>"}),$.ajax({type:"get",url:TempUrl+"hit/getObligate.action?type=1,2,3,4&app_or_por=2",contentType:"application/x-www-form-urlencoded",dataType:"json",success:function(t){$.each(t,function(e,t){switch(parseInt(t.type)){case 1:o+='<option data-support="'+t.ename+'" value="'+t.id+'">'+t.name+"</option>";break;default:return"-"}});var l="";l+='<div class="row" id="VueDiv"><div class="col-sm-12"><div class="form-horizontal" id="">',l+='<br><div class="form-group"><label class="col-sm-3 control-label"><i class="fa fa-asterisk"></i>hit版本</label><div class="col-sm-6"><select id="HitV2" name="HitV2" class="selectpicker form-control" data-live-search="true"><option value="">选择版本</option>'+a+'</select></div><div class="col-sm-2"><p class="form-control-static" style="display:inline-block;margin-right:15px;"><i class="fa fa-plus-circle" onclick="version_add(2)" data-toggle="tooltip" data-placement="top"></i></p><p class="form-control-static"  style="display:inline-block;margin-right:15px;"><i v-on:click="version_del(1)" class="fa fa-minus-circle"></i></p></div></div>',l+='<div class="form-group"><label class="col-sm-3 control-label">版本日期</label><div class="col-sm-6"><div class="input-group date" id="datetimepicker"><input type="text" id="versiondate2" class="form-control" readonly><span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span></div></div></div>',l+='<div class="form-group"><label class="col-sm-3 control-label"><i class="fa fa-asterisk"></i> 页别</label><div class="col-sm-3"><select id="Obligate_1_2" name="Obligate_1_2" class="selectpicker col-sm-4 form-control" data-live-search="true"><option value="">选择页别</option>'+o+'</select></div><div class="col-sm-3"><input  id="Obligate_1_2_en"  type="text" class="form-control" readonly="readonly"></div><div class="col-sm-3"><p class="form-control-static"  style="display:inline-block;margin-right:15px;"><i v-on:click="style_add(\'1\')" class="fa fa-plus-circle"></i></p><p class="form-control-static"  style="display:inline-block;margin-right:15px;"><i v-on:click="version_del(3)" class="fa fa-minus-circle"></i></p><p class="form-control-static"  style="display:inline-block;margin-right:15px;"><i class="fa fa-exclamation-circle"  data-toggle="tooltip" data-placement="top" title="页别，类别，预留维度要有1,2,3级菜单级联关系"></i></p></div></div>',l+='<div class="form-group"><label class="col-sm-3 control-label"><i class="fa fa-asterisk"></i>hit名称</label><div class="col-sm-3"><input type="text" id="HitName2" name="HitName2" class="form-control" placeholder="请输入名称"></div><div class="col-sm-3"><input type="text" id="HitNameE2" name="HitNameE2" class="form-control" placeholder="请输入英文名"></div><div class="col-sm-2"><p class="form-control-static"><i class="fa fa-exclamation-circle"  data-toggle="tooltip" data-placement="top" title="不超过10个的字母，需验证版本号和该字段组合唯一"></i></p></div></div>',l+='<div class="form-group"><label class="col-sm-3 control-label">hit id</label><div class="col-sm-6"><input type="text" id="HitId2" name="HitId2" class="form-control" readonly></div><div class="col-sm-3"><button v-on:click="dadian_add()" class="btn btn-primary">生成事件</button></div></div>',l+='<div class="form-group"><label class="col-sm-3 control-label">事件ID</label><div class="col-sm-6"><input type="text" id="HitEventID2" name="HitEventID2" class="form-control" readonly></div></div>',l+='<div class="form-group"><label class="col-sm-3 control-label"><i class="fa fa-asterisk"></i>行为类型</label><div class="col-sm-6"><select id="ActionType2" name="ActionType2" class="selectpicker form-control" data-live-search="true"><option value="">选择类型</option><option value="1">user_click</option><option value="2">user_pageview</option><option value="3">user_system</option><option value="4">ad_impression</option><option value="5">ad_click</option><option value="6">error_device</option><option value="7">error_cloud</option><option value="8">business_feedback</option></select></div></div>',l+='<div class="form-group"><label class="col-sm-3 control-label">描述</label><div class="col-sm-6"><textarea type="textarea" class="form-control" id="Describe2" name="Describe2"></textarea></div></div>',l+='<div class="form-group"><label class="col-sm-3 control-label">状态</label><div class="col-sm-6"><select id="Status2" name="Status2" class="selectpicker form-control" data-live-search="true"><option value="1">已下线</option><option value="2">正常使用</option><option value="3">新增打点</option></select></div></div>',l+='<div class="form-group"><label class="col-sm-3 control-label">扩展字段说明</label><div class="col-sm-6"><textarea id="por_col1" type="textarea" class="form-control"></textarea></div></div>',l+='<div class="form-group"><label class="col-sm-3 control-label">refhit</label><div class="col-sm-6"><select id="Refhitid2" name="Refhitid2" class="selectpicker form-control"><option value="1">是</option><option value="2">否</option></select></div></div>',l+="</div></div></div>",BootstrapDialog.show({title:"修改项信息",message:l,draggable:!0,closable:!1,onshown:function(e){new Vue({el:"#VueDiv",data:{todos:Obligate_4_Array},mounted:function(){$(".selectpicker").selectpicker("refresh"),$("#HitV2").selectpicker("val",i.por_hitV),$("#Obligate_1_2").selectpicker("val",i.por_page),$("#versiondate2").val(i.por_versiondate),$("#Obligate_1_2_en").val(i.pageEname),$("#HitName2").val(i.por_hitname),$("#HitNameE2").val(i.por_hitnameE),$("#HitId2").val(i.por_hitID),$("#HitEventID2").val(i.por_hitEventID),$("#Describe2").val(i.por_describe),$("#ActionType2").selectpicker("val",i.por_actiontype),$("#Status2").selectpicker("val",i.por_status),$("#por_col1").val(i.por_col1),$("#Refhitid2").selectpicker("val",i.por_refhitid),$(".selectpicker").selectpicker("refresh"),$('[data-toggle="tooltip"]').tooltip(),$("#ShowList").on("click",function(){$(this).hide(),$("#isList").show()}),$("#datetimepicker").datetimepicker({format:"yyyy-mm-dd",weekStart:1,autoclose:!0,minView:"month",language:"zh-CN"})},methods:{style_add:function(t){var a="";switch(parseInt(t)){case 1:a="页别";break;default:return"-"}var o="";o+='<div class="row"><div class="col-sm-12"><div class="form-horizontal" id="FormValidator2">',o+='<div class="form-group"><label class="col-sm-3 control-label">中文名称</label><div class="col-sm-8"><input type="text" id="name2" name="name2" class="form-control"></div></div>',o+='<div class="form-group"><label class="col-sm-3 control-label">英文名称</label><div class="col-sm-8"><input type="text" id="ename2" name="ename2" class="form-control"></div></div>',o+="</div></div></div>",BootstrapDialog.show({title:"新增"+a,message:o,onshown:function(e){$("#FormValidator2").bootstrapValidator({message:"This value is not valid",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{name2:{message:"中文名无效",validators:{notEmpty:{message:"请输入中文名"}}},ename2:{message:"英文名无效",validators:{notEmpty:{message:"请输入英文名"}}}}})},buttons:[{label:"提交",cssClass:"btn-primary",action:function(a){if($("#FormValidator2").bootstrapValidator("validate"),$("#FormValidator2").data("bootstrapValidator").isValid()){var o=new Object;o.name=$("#name2").val(),o.ename=$("#ename2").val(),o.type=t,o.app_or_por=2,$.ajax({type:"post",url:TempUrl+"hit/addObligate.action",timeout:6e4,dataType:"json",data:o,success:function(t){var o="";o=t.message,6e5==t.result?(errorNotify("",o,"info"),a.close(),e.close()):errorNotify("",o)},error:function(e,t,a){"timeout"==t&&BootstrapDialog.show({title:"系统提示",message:"请求超时！",buttons:[{label:"关闭",action:function(e){e.close()}}]})}})}else BootstrapDialog.alert({title:"验证失败",message:"请确认输入内容格式是否正确！",type:BootstrapDialog.TYPE_DANGER,buttonLabel:"确认"})}}]})},dadian_add:function(){var e=$("#HitV2").val(),t=$("#Obligate_1_2_en").val(),a="";if(""==e)return errorNotify("","请选择版本"),!1;if(""==$("#HitNameE2").val())return errorNotify("","请输入英文名"),!1;a=$("#HitNameE2").val(),""!=t?$("#HitId2").val(a):errorNotify("","请选择页别");var o="app_hitV="+e+"&hitId="+a+"&app_or_por=2";$.ajax({type:"post",contentType:"application/x-www-form-urlencoded",url:TempUrl+"hit/verifyHitId.action",timeout:6e4,dataType:"json",data:o,success:function(e){var t="",a=(t=e.message).split("_");t=a[0];var o=a[1];600025==e.result?$("#HitEventID2").val(o):(errorNotify("",t),$("#HitId2,#HitEventID2").val(""))},error:function(e,t,a){"timeout"==t&&BootstrapDialog.show({title:"系统提示",message:"请求超时！",buttons:[{label:"关闭",action:function(e){e.close()}}]})}})},version_del:function(e){var t;1==e&&(t=$("#HitV2").val()),3==e&&(t=$("#Obligate_1_2").val()),$.ajax({type:"get",url:"http://42.159.123.51:8087/hit/removeOption.action?ids="+t+"&order="+e,success:function(e){var t="";t=e.message,600002==e.result?errorNotify("",t,"info"):(t=e.message,errorNotify("",t))},error:function(e,t,a){"timeout"==t&&BootstrapDialog.show({title:"系统提示",message:"请求超时！",buttons:[{label:"关闭",action:function(e){e.close()}}]})}})}}}),$("#Obligate_1_2").change(function(){$("#Obligate_1_2_en").val($(this).find("option:selected").attr("data-support")),$("#HitId2,#HitEventID2").val("")})},buttons:[{label:"提交",cssClass:"btn-primary",action:function(t){var a=new Object;return a.id=e,a.por_hitV=$("#HitV2").val(),a.por_page=$("#Obligate_1_2").val(),a.por_hitname=$("#HitName2").val(),a.por_hitnameE=$("#HitNameE2").val(),a.por_actiontype=$("#ActionType2").val(),a.por_describe=$("#Describe2").val(),a.por_hitID=$("#HitId2").val(),a.por_hitEventID=$("#HitEventID2").val(),a.por_status=$("#Status2").val(),a.por_col1=$("#por_col1").val(),a.por_refhitid=$("#Refhitid2").val(),a.por_versiondate=$("#versiondate2").val(),a.por_createtime=moment().format("HH:mm:ss"),""==a.por_hitV?(errorNotify("","请选择版本"),!1):""==a.por_page?(errorNotify("","请选择页别"),!1):""==a.por_hitname?(errorNotify("","请输入名称"),!1):""==a.por_hitnameE?(errorNotify("","请输入英文名"),!1):""==a.por_hitID?(errorNotify("","请生成打点Id"),!1):""==a.por_actiontype?(errorNotify("","请选择行为类型"),!1):void $.ajax({type:"post",url:TempUrl+"hit/editPortal.action",timeout:6e4,dataType:"json",data:a,success:function(e){var a="";a=e.message,600005==e.result?($("#table-app").bootstrapTable("refreshOptions",{pageNumber:1}),errorNotify("",a,"info"),t.close()):(a=e.message,errorNotify("",a))},error:function(e,t,a){"timeout"==t&&BootstrapDialog.show({title:"系统提示",message:"请求超时！",buttons:[{label:"关闭",action:function(e){e.close()}}]})}})}},{label:"取消",cssClass:"btn-primary",action:function(e){e.close()}}]})},error:function(){errorNotify(null,"无法获取信息！")}})},error:function(){errorNotify(null,"无法获取版本信息！")}})},error:function(){errorNotify(null,"无法获取版本信息！")}})}function version_add(e){var t="";t+='<div class="row"><div class="col-sm-12"><div class="form-horizontal" id="FormValidator2">',t+='<div class="form-group"><label class="col-sm-3 control-label">版本名称</label><div class="col-sm-8"><input type="text" id="versionName3" name="versionName3" class="form-control" placeholder="请输入版本名称"></div></div>',t+='<div class="form-group"><label class="col-sm-3 control-label">版本状态</label><div class="col-sm-8"><select id="versionState3" name="versionState3" class="selectpicker form-control" data-live-search="true"><option value="1">新增版本</option><option value="2">稳定版本</option><option value="3">下线版本</option></select></div></div>',t+="</div></div></div>",BootstrapDialog.show({title:"新增版本",message:t,onshown:function(e){$(".selectpicker").selectpicker("refresh")},buttons:[{label:"提交",cssClass:"btn-primary",action:function(t){if(""==$("#versionName3").val())return errorNotify(null,"请输入版本名称！"),!1;if(""==$("#versionState3").val())return errorNotify(null,"请选择状态！"),!1;var a=new Object;a.v_name=$("#versionName3").val(),a.v_type=$("#versionState3").val(),a.app_or_por=e,$.ajax({type:"get",url:TempUrl+"hit/verifyVersion.action?v_name="+a.v_name+"&app_or_por="+e,timeout:6e4,dataType:"json",success:function(e){var o="";o=e.message,600025==e.result?($("#table-app").bootstrapTable("refreshOptions",{pageNumber:1}),errorNotify("",o,"info"),t.close()):(o=e.message,errorNotify("",o)),$.ajax({type:"post",url:TempUrl+"hit/addVersion.action",timeout:6e4,dataType:"json",data:a,success:function(e){var a="";a=e.message,6e5==e.result?(errorNotify("",a,"info"),t.close()):(a=e.message,errorNotify("",a))},error:function(e,t,a){"timeout"==t&&BootstrapDialog.show({title:"系统提示",message:"请求超时！",buttons:[{label:"关闭",action:function(e){e.close()}}]})}})},error:function(e,t,a){"timeout"==t&&BootstrapDialog.show({title:"系统提示",message:"请求超时！",buttons:[{label:"关闭",action:function(e){e.close()}}]})}})}}]})}function queryParams_portal(e){var t=String($("#portal_Versions").val());return"null"==t&&(t=""),{limit:e.limit,offset:e.offset,por_hitVs:t,por_page:$("#portal_Obligate_1").val(),por_actiontype:$("#portal_Obligate_3").val(),por_hitname:$("#portal_hitName").val(),por_hitID:$("#portal_hitId").val(),por_status:$("#portal_Obligate_4").val()}}getPortalVersions(),getObligate("portal_Obligate_1",1,"页别",2);var _BodyHeight=document.body.scrollHeight-109;$(function(){$("#table-portal").bootstrapTable(),$(window).resize(function(){$("#table-portal").bootstrapTable("resetView")})});var _temp={method:"get",contentType:"application/x-www-form-urlencoded",url:TempUrl+"hit/getPortals.action",dataType:"json",striped:!1,uniqueId:"id",pagination:!0,pageSize:20,pageList:[10,20,50,100,300,500],singleSelect:!1,idField:"id",clickToSelect:!0,height:_BodyHeight,sortable:!1,sidePagination:"server",queryParams:queryParams_portal,rowStyle:function(e,t){switch(parseInt(e.por_status)){case 1:return{classes:"active"};case 2:return{classes:""};case 3:return{classes:"danger"};default:return{classes:""}}},columns:[{idfield:"state",checkbox:!0,valign:"middle"},{title:"序号",field:"id",align:"center",valign:"middle",formatter:function(e,t,a){return a+1}},{title:"portal版本",field:"hitVersionName",valign:"middle"},{title:"版本日期",field:"por_versiondate",align:"center",valign:"middle"},{title:"创建时间",field:"por_createtime",align:"center",valign:"middle"},{title:"页别名称",field:"pageName",valign:"middle"},{title:"页别英文名",field:"pageEname",valign:"middle"},{title:"hit名称",field:"por_hitname",valign:"middle"},{title:"hit英文名",field:"por_hitnameE",valign:"middle"},{title:"hit id",field:"por_hitID",valign:"middle"},{title:"事件ID",field:"por_hitEventID",valign:"middle"},{title:"行为类型",field:"por_actiontype",valign:"middle",formatter:function(e,t,a){switch(e=parseInt(e)){case 1:return"user_click";case 2:return"user_pageview";case 3:return"user_system";case 4:return"ad_impression";case 5:return"ad_click";case 6:return"error_device";case 7:return"error_cloud";case 8:return"business_feedback";default:return"-"}}},{title:"描述",field:"por_describe",valign:"middle"},{title:"状态",field:"por_status",valign:"middle",formatter:function(e,t,a){switch(e=parseInt(e)){case 1:return"已下线";case 2:return"正常使用";case 3:return"新增打点";default:return"-"}}},{title:"扩展字段说明",field:"por_col1",valign:"middle"},{title:"refhit",field:"por_refhitid",valign:"middle"}],onLoadSuccess:function(){var e=$("#table-portal");TableIDArray=[],e.find('input[name="btSelectItem"]').each(function(){$(this).removeAttr("checked")}),e.find('input[name="btSelectAll"]').click(function(){1==e.find('input[name="btSelectAll"]').prop("checked")?(e.find('input[name="btSelectItem"]').each(function(){TableIDArray.push(parseInt($(this).val()))}),TableIDArray=unique(TableIDArray)):e.find('input[name="btSelectItem"]').each(function(){0==$(this).prop("checked")&&TableIDArray.splice(TableIDArray.indexOf(parseInt($(this).val())),1)})}),e.find('input[name="btSelectItem"]').each(function(){-1!=TableIDArray.indexOf(parseInt($(this).val()))&&$(this).attr("checked",!0)}),e.find('input[name="btSelectItem"]').change(function(){1==$(this).prop("checked")?(TableIDArray.push(parseInt($(this).val())),$(this).parent().parent().find("td").addClass("active")):(TableIDArray.splice(TableIDArray.indexOf(parseInt($(this).val())),1),$(this).parent().parent().find("td").removeClass("active"))}),TableIDArray=unique(TableIDArray)}},TableIDArray=new Array;$("#table-portal").bootstrapTable(_temp),$("#portal_del").click(function(){0!=TableIDArray.length?BootstrapDialog.confirm({title:"删除确认提醒",message:"是否确认删除所选择信息？",closable:!0,draggable:!0,btnCancelLabel:"取消",btnOKLabel:"确认",callback:function(e){if(e){var t="";t="ids="+String(TableIDArray),$.ajax({type:"post",url:TempUrl+"hit/removePortal.action",timeout:6e4,dataType:"json",data:t,success:function(e){600002==e.result?($("#table-portal").bootstrapTable("refreshOptions",{pageNumber:1}),errorNotify("",e.message,"info")):(e.result,Message=e.message,errorNotify("",Message))},error:function(e,t,a){"timeout"==t&&BootstrapDialog.show({title:"系统提示",message:"请求超时！",buttons:[{label:"关闭",action:function(e){e.close()}}]})}})}}}):errorNotify(null,"请勾选需要删除的数据！")}),$("#copy_button_portal").click(function(){0!=TableIDArray.length?$.ajax({type:"get",url:TempUrl+"hit/getVersions.action?app_or_por=2",contentType:"application/x-www-form-urlencoded",dataType:"json",success:function(e){var t="";$.each(e,function(e,a){t+='<option value="'+a.id+'">'+a.v_name+"</option>"});var a="";a+='<div class="row"><div class="col-sm-12"><div class="form-horizontal" id="FormValidator2">',a+='<div class="form-group"><div class="col-sm-1"></div><div class="col-sm-7"><select id="versionId" name="versionId" class="selectpicker form-control" data-live-search="true"><option value="">复制已有版本</option>'+t+'</select></div><div class="col-sm-2"><a id="add_versionId" class="btn btn-primary">复制到已有版本</a></div></div>',a+='<div class="form-group"><div class="col-sm-1"></div><div class="col-sm-7"><input type="text" id="versionName" name="versionName" class="form-control" placeholder="复制到新版本"></div><div class="col-sm-2"><a id="add_versionName" class="btn btn-primary">复制到新增版本</a></div></div>',a+="</div></div></div>",BootstrapDialog.show({title:"复制到新版本",message:a,onshown:function(e){$(".selectpicker").selectpicker("refresh"),$("#add_versionId").click(function(){if(""==$("#versionId").val())return errorNotify(null,"请选择版本号！"),!1;var t=new Object;t.versionId=$("#versionId").val(),t.appIds=String(TableIDArray),t.app_or_por=2,$.ajax({type:"post",url:TempUrl+"hit/copy.action",timeout:6e4,dataType:"json",data:t,success:function(t){var a="";if(a=t.message,600027!=t.result)return a=t.message,errorNotify("",a),1;errorNotify("",a,"info"),$("#table-portal").bootstrapTable("refreshOptions",{pageNumber:1}),e.close()},error:function(e,t,a){"timeout"==t&&BootstrapDialog.show({title:"系统提示",message:"请求超时！",buttons:[{label:"关闭",action:function(e){e.close()}}]})}})}),$("#add_versionName").click(function(){if(""==$("#versionName").val())return errorNotify(null,"请输入版本！"),!1;var t=new Object;t.versionName=$("#versionName").val(),t.appIds=String(TableIDArray),t.app_or_por=2,$.ajax({type:"post",url:TempUrl+"hit/copy.action",timeout:6e4,dataType:"json",data:t,success:function(t){var a="";a=t.message,600027==t.result?(errorNotify("",a,"info"),$("#table-portal").bootstrapTable("refreshOptions",{pageNumber:1}),e.close()):(a=t.message,errorNotify("",a))},error:function(e,t,a){"timeout"==t&&BootstrapDialog.show({title:"系统提示",message:"请求超时！",buttons:[{label:"关闭",action:function(e){e.close()}}]})}})})}})},error:function(){errorNotify(null,"无法获取版本信息！")}}):errorNotify(null,"请勾选需要复制的数据！")}),$("#portal_version_button").click(function(){var e,t="",a=[];t='<table id="portal_gl"></table>';var o={method:"get",contentType:"application/x-www-form-urlencoded",url:TempUrl+"hit/getVersions.action?app_or_por=2",dataType:"json",striped:!1,uniqueId:"id",singleSelect:!1,idField:"id",height:400,sortable:!1,columns:[{idfield:"state",checkbox:!0,valign:"middle"},{title:"版本",field:"v_name",align:"center",valign:"middle"},{title:"状态",align:"center",valign:"middle",field:"v_type",editable:{type:"select",title:"状态",disabled:!1,source:[{value:"1",text:"新增版本"},{value:"2",text:"稳定版本"},{value:"3",text:"下线版本"},{value:"4",text:"删除版本"}]}}],onLoadSuccess:function(){e.find('input[name="btSelectItem"]').each(function(){$(this).removeAttr("checked")}),e.find('input[name="btSelectAll"]').click(function(){1==e.find('input[name="btSelectAll"]').prop("checked")?(e.find('input[name="btSelectItem"]').each(function(){a.push(parseInt($(this).val()))}),a=unique(a)):e.find('input[name="btSelectItem"]').each(function(){0==$(this).prop("checked")&&a.splice(a.indexOf(parseInt($(this).val())),1)})}),e.find('input[name="btSelectItem"]').each(function(){-1!=a.indexOf(parseInt($(this).val()))&&$(this).attr("checked",!0)}),e.find('input[name="btSelectItem"]').change(function(){1==$(this).prop("checked")?(a.push(parseInt($(this).val())),$(this).parent().parent().find("td").addClass("active")):(a.splice(a.indexOf(parseInt($(this).val())),1),$(this).parent().parent().find("td").removeClass("active"))})}};BootstrapDialog.show({title:"版本管理",message:t,onshown:function(t){(e=$("#portal_gl")).bootstrapTable(o),e.on("all.bs.table",function(e,t,a){if("editable-hidden.bs.table"==t&&"save"==a[3]){var o=new Object;o.id=a[1].id,o.v_type=a[1].v_type,$.ajax({type:"post",url:TempUrl+"hit/updateVersion.action",timeout:6e4,dataType:"json",data:o,success:function(e){var t="";t=e.message,600005==e.result?errorNotify("",t,"info"):(t=e.message,errorNotify("",t))},error:function(e,t,a){"timeout"==t&&BootstrapDialog.show({title:"系统提示",message:"请求超时！",buttons:[{label:"关闭",action:function(e){e.close()}}]})}})}})},buttons:[{label:"新增",cssClass:"btn-primary",action:function(e){$.ajax({type:"post",url:TempUrl+"hit/getVersions.action?type=1&app_or_por=2",dataType:"json",contentType:"application/x-www-form-urlencoded",success:function(e){var t="";$.each(e,function(e,a){t+='<option value="'+a.id+'">'+a.v_name+"</option>"}),appPor=2;var a="";a+='<div class="row"><div class="col-sm-12"><div class="form-horizontal" id="FormValidator2">',a+='<div class="form-group"><label class="col-sm-3 control-label">版本名称</label><div class="col-sm-8"><input type="text" id="versionName3" name="versionName3" class="form-control" placeholder="请输入版本名称"></div></div>',a+='<div class="form-group"><label class="col-sm-3 control-label">继承版本</label><div class="col-sm-8"><select id="versionState3" name="versionState3" class="selectpicker form-control" data-live-search="true">'+t+"</select></div></div>",a+="</div></div></div>",BootstrapDialog.show({title:"新增版本",message:a,onshown:function(e){$(".selectpicker").selectpicker("refresh")},buttons:[{label:"提交",cssClass:"btn-primary",action:function(e){if(""==$("#versionName3").val())return errorNotify(null,"请输入版本名称！"),!1;if(""==$("#versionState3").val())return errorNotify(null,"选择继承版本！"),!1;var t=$("#versionName3").val(),a=$("#versionState3").val();$.ajax({type:"get",url:TempUrl+"hit/extendVersion.action?sonVName="+t+"&parentVId="+a,contentType:"application/x-www-form-urlencoded",dataType:"json",timeout:6e4,success:function(t){var a="";a=t.message,6e5==t.result?(errorNotify("",a,"info"),e.close()):(a=t.message,errorNotify("",a))},error:function(e,t,a){"timeout"==t&&BootstrapDialog.show({title:"系统提示",message:"请求超时！",buttons:[{label:"关闭",action:function(e){e.close()}}]})}})}}]})},error:function(e,t,a){errorNotify(null,"获取版本失败")}})}},{label:"删除",cssClass:"btn-primary",action:function(e){0!=a.length?BootstrapDialog.confirm({title:"删除确认提醒",message:"是否确认删除所选择信息？",closable:!0,draggable:!0,btnCancelLabel:"取消",btnOKLabel:"确认",callback:function(e){if(e){del_id=String(a),$.ajax({type:"post",url:"http://42.159.123.51:8087/hit/removeOption.action?ids="+del_id+"&order=1",timeout:6e4,contentType:"application/x-www-form-urlencoded",success:function(e){600002==e.result?($("#portal_gl").bootstrapTable("destroy").bootstrapTable(o),errorNotify("",e.message,"info")):(e.result,Message=e.message,errorNotify("",Message))},error:function(e,t,a){"timeout"==t&&BootstrapDialog.show({title:"系统提示",message:"请求超时！",buttons:[{label:"关闭",action:function(e){e.close()}}]})}})}else errorNotify("","取消删除")}}):errorNotify(null,"请勾选需要删除的数据！")}}]})});var Obligate_4_Array=new Array;$("#portal_start_add").click(function(){window.open("add.html")}),$("#portal_serach_button").click(function(){$("#table-portal").bootstrapTable("refreshOptions",{pageNumber:1})}),$("#portal_download_button").click(function(){var e=1,t=String($("#portal_Versions").val());"null"==t&&(t="");var a=$("#portal_Obligate_1").val(),o=$("#portal_Obligate_3").val(),i=$("#portal_hitName").val(),l=$("#portal_hitId").val(),r=$("#portal_Obligate_4").val();""==t&&""==a&&""==o&&""==i&&""==l&&""==r&&(e=0),window.open(TempUrl+"hit/exportPortal.action?ids="+e+"&por_hitVs="+t+"&por_page="+a+"&por_actiontype="+o+"&por_hitname="+i+"&por_hitID="+l+"&por_status="+r)});